<section class="pt-20 pb-10 bg-gray-50 min-h-screen">
  <div class="container xl:w-[95%] mx-auto px-4">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold text-gray-800">
        <i class="fas fa-heart text-red-500 mr-2"></i>
        My Wishlist
      </h2>
      @if (wishlistProducts().length > 0) {
        <span class="text-sm text-gray-600">{{ wishlistProducts().length }} items</span>
      }
    </div>

    @if (wishlistProducts().length > 0) {
      <div class="grid gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5">
        @for (product of wishlistProducts(); track product.id) {
          <div class="bg-white rounded-xl shadow-sm hover:shadow-2xl transition-all duration-300 overflow-hidden border border-gray-100 relative group">
            <!-- Remove Button -->
            <button 
              (click)="removeFromWishlist(product.id)"
              class="absolute top-2 right-2 z-10 w-8 h-8 bg-white/90 backdrop-blur-sm text-red-500 rounded-full shadow-md flex items-center justify-center hover:bg-red-500 hover:text-white transition-all duration-200"
            >
              <i class="fas fa-times text-sm"></i>
            </button>

            <!-- Product Image -->
            <div class="relative overflow-hidden bg-gray-50">
              <img 
                [src]="product.imageCover" 
                [alt]="product.title"
                class="w-full h-52 object-cover group-hover:scale-105 transition-transform duration-700"
              />
              <!-- Category Badge -->
              <div class="absolute bottom-2 left-2 bg-green-600 text-white px-2 py-1 rounded-md text-xs font-semibold">
                {{ product.category.name | titlecase }}
              </div>
            </div>

            <!-- Product Info -->
            <div class="p-3">
              <h4 class="text-sm font-semibold text-gray-800 mb-2 h-10 line-clamp-2 group-hover:text-green-600 transition-colors duration-200">
                {{ product.title | titlecase }}
              </h4>
              
              <div class="flex items-center justify-between mb-3">
                <span class="text-lg font-bold text-green-600">
                  {{ product.price | currency:'EGP':'symbol':'1.0-0' }}
                </span>
                <div class="flex items-center gap-1 bg-yellow-50 px-2 py-1 rounded-md">
                  <i class="fas fa-star text-yellow-400 text-xs"></i>
                  <span class="text-xs font-semibold text-gray-700">{{ product.ratingsAverage }}</span>
                </div>
              </div>

              <!-- Actions -->
              <div class="flex gap-2">
                <button 
                  (click)="addToCart(product.id)"
                  class="flex-1 cursor-pointer bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center justify-center gap-1.5 shadow-sm hover:shadow-md"
                >
                  <i class="fas fa-shopping-cart text-xs"></i>
                  <span>Add to Cart</span>
                </button>
                <a 
                  [routerLink]="['/details', product.slug, product.id]"
                  class="w-10 h-10 cursor-pointer border-2 border-green-600 text-green-600 hover:bg-green-600 hover:text-white rounded-lg transition-all duration-500 flex items-center justify-center shadow-sm hover:shadow-md"
                >
                  <i class="fas fa-eye text-sm"></i>
                </a>
              </div>
            </div>
          </div>
        }
      </div>
    } @else {
      <!-- Empty Wishlist State -->
      <div class="bg-white rounded-lg shadow-sm p-12 text-center border border-gray-100">
        <div class="mb-6">
          <i class="fas fa-heart text-gray-300 text-7xl"></i>
        </div>
        <h3 class="text-2xl font-bold text-gray-800 mb-2">Your wishlist is empty</h3>
        <p class="text-gray-500 mb-6">Save your favorite products here!</p>
        <a 
          routerLink="/products"
          class="inline-flex items-center gap-2 bg-green-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors duration-200"
        >
          <i class="fas fa-shopping-bag"></i>
          Start Shopping
        </a>
      </div>
    }
  </div>
</section>
